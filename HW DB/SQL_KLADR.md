<table width="1000" border="1">
<thead>
  <tr>
    <td rowspan="3"><img width="300px" src="https://github.com/vnukov-vv/AlfaCampus-SA/assets/101928718/6c8664d3-2b42-4c23-9b08-686f390ca366"></td>
    <td colspan="2" width="700"><p align="center"><b>Проект по обработке адресных объектов<br>в Системе «Заказ банковских карт в удаленных каналах»</b></p></td>
  </tr>
  <tr>
    <td>Дата</td>
    <td>29.01.2024</td>
  </tr>
  <tr>
    <td>Версия</td>
    <td>1.0</td>
  </tr>
</thead>
</table>

## История изменений

|Дата |Описание изменения |Версия |Автор |Бизнес-заказчик |Согласование<br>бизнес-заказчика|
|:---:|:---:|:---:|:---:|:---:|:---:|
|29/01/2024|Согласованная версия документа|1.1|Внуков В.В. |Кислицын Е.В.|---|

## Контактные лица
|Подразделение	|Роль в процессе| Фамилия И.О.|
|---|---|---|
|Альфа-Кампус|СА-Кампусенок|Внуков В.В.|

# Поддержка формата Государственного адресного реестра (ГАР) в Системе "Заказ банковских карт в удаленных каналах"
В рамках централизованного банковского проекта по обработке адресных объектов.
<br>**Допущение**: в рамках задания используется файловая [выгрузка](https://fias-file.nalog.ru/downloads/2024.01.23/base.7z "см. https://fias.nalog.ru/Frontend") в формате  [КЛАДР 4.0](https://kladr-rf.ru/ "Классификатор адресов Российской Федерации
Введен в действие с 01.12.2005 приказом ФНС России от 17.11.2005 № САЭ-3-13/594@.")

## Оглавление
[1. Цели проекта](#title1) <br> 
[2. Задачи проекта](#title2)</br>
[3. Модель данных](#title3)</br>
&nbsp; [3.1 Таблицы БД](#title3_1) <br>
&nbsp; [3.2 Описание таблиц БД PlasticOrder](#title3_2) <br>
&nbsp; [3.3 Описание таблиц БД KLADR](#title3_2) <br>
&nbsp; [3.4 SQL-скрипты](#title3_2) <br>

## <a id="title1"> 1. Цели проекта </a>
- Обязательное использование ГАР всеми информационными системами Банка.
- Привести разрозненные сведения об адресах к единому, унифицированному написанию, исключить дубли, ошибки и противоречия в адресах при информационном взаимодействии.
- Обеспечить корректное заполнение адресных данных Банка, Клиентов, Контрагентов в исходящих документах и отчетности Банка.

## <a id="title2"> 2. Задачи проекта </a>
- Настроить хранение и регулярное обновление данных ГАР в информационной системе Банка
- Произвести конвертацию имеющихся адресных записей в формат ГАР
- Настроить контроль заполнения атрибутов адресов [при добавлении или изменении записей] значениями из ГАР

## <a id="title3"> 3. Модель данных </a>

База данных **PlasticOrder** предназначена для автоматизации процессов заказа **Карт** **Банка** в удаленных каналах
База данных **KLADR** импортируемый справочник адресов в установленном формате.

### <a id="title3_1"> Таблицы БД </a>
Таблицы изменяемые в рамках реализации проекта
<br>**Допущение**: в рамках задания используется только одна сущность

|№ |Имя|Описание| 
|---|---|---|
|1|*dbo.departments*|Отделения выдачи **Карт**|

### <a id="title3_2"> Описание таблиц БД **PlasticOrder** </a>

#### dbo.departments (AS IS)
Отделения выдачи карт

##### Колонки (6)
|№ |Имя|Тип<br>данных|Размер|Обязательное<br>(Да/Нет)|Описание|
|---|---|---|---|---|---|
|1|*idDepartment*|int|4|Да|Первичный ключ|
|2|*name*|nchar|255|Нет|Наименование отделения|
|3|*idDepartmentsSystem*|bigint|8|Нет|Идентификатор в системе-источнике|
|4|*workTime*|nvarchar|255|Нет|Времф работы отделения Банка|
|5|*phone*|nvarchar|255|Нет|Телефон отделения Банка|
|6|*adressString*|nvarchar|255|Нет|Адрес Банка|
##### Ключи (1)
|Тип|Имя ключа|Поле|Описание| 
|---|---|---|---|
|PRIMARY KEY<BR>(clustered)|*PK_department*|*idDepartment*|---|
##### Индексы (1)
|Имя|Детали|Ключи|Описание| 
|---|---|---|---|
|*PK_department*|clustered, unique, primary key located on PRIMARY|*idDepartment*|---|

Таблица ссылается на внешние ключи: *PlasticOrder.dbo.orders: FK_orders_department*

#### dbo.departments (переходное состояние)
##### Колонки (6)
|№ |Имя|Тип<br>данных|Размер|Обязательное<br>(Да/Нет)|Описание|
|---|---|---|---|---|---|
|1|*idDepartment*|int|4|Да|Первичный ключ|
|2|*name*|nchar|255|Нет|Наименование отделения|
|3|*idDepartmentsSystem*|bigint|8|Нет|Идентификатор в системе-источнике|
|4|*workTime*|nvarchar|255|Нет|Времф работы отделения Банка|
|5|*phone*|nvarchar|255|Нет|Телефон отделения Банка|
|6|*addressString*|nvarchar|255|Нет|Адрес Банка|

#### dbo.departments (TO BE)
Отделения выдачи карт
<br>**Допущение**: В рамках задания поддержка КЛАДР будет включать: уровень города – атрибут KLADR; уровень улицы – KLADR_STREET. 
##### Колонки (6)
|№ |Имя|Тип<br>данных|Размер|Обязательное<br>(Да/Нет)|Описание|
|---|---|---|---|---|---|
|1|*idDepartment*|int|4|Да|Первичный ключ|
|2|*name*|nchar|255|Нет|Наименование отделения|
|3|*idDepartmentsSystem*|bigint|8|Нет|Идентификатор в системе-источнике|
|4|*workTime*|nvarchar|255|Нет|Времф работы отделения Банка|
|5|*phone*|nvarchar|255|Нет|Телефон отделения Банка|
|6|*addressString*|nvarchar|255|Нет|Адрес Банка|

### <a id="title3_3"> Описание таблиц БД **KLADR** </a>
Классификатор адресов РФ

|№ |Имя|Описание| 
|---|---|---|
|1|*dbo.ALTNAMES*||
|2|*dbo.DOMA*|Дом|
|3|*dbo.FLAT*|Квартира|
|4|*bo.KLADR*||
|5|*dbo.NAMEMAP*||
|6|*dbo.SOCRBASE*||
|7|*dbo.STREET*|Улица|

#### dbo.ALTNAMES
#### dbo.DOMA
#### dbo.FLAT
#### dbo.KLADR
#### dbo.NAMEMAP
#### dbo.SOCRBASE
#### dbo.STREET

##### Колонки (6)
|№ |Имя|Тип<br>данных|Размер|Обязательное<br>(Да/Нет)|Описание|
|---|---|---|---|---|---|
|---|---|---|---|---|---|


### <a id="title3_4"> SQL-скрипты </a>
```
SQL
```




