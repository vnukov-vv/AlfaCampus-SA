<table width="1000" border="1">
<thead>
  <tr>
    <td rowspan="3"><img width="300px" src="https://github.com/vnukov-vv/AlfaCampus-SA/assets/101928718/6c8664d3-2b42-4c23-9b08-686f390ca366"></td>
    <td colspan="2" width="700"><p align="center"><b>Cтруктура БД для сервиса «Доставка заказа карт»</b></p></td>
  </tr>
  <tr>
    <td>Дата</td>
    <td>15.01.2024</td>
  </tr>
  <tr>
    <td>Версия</td>
    <td>1.1</td>
  </tr>
</thead>
</table>

# Cтруктура БД для сервиса «Доставка заказа карт».

## Оглавление
[1. Требования к Системе](#title1) <br> 
&nbsp; [1.1 Термины и определения](#title1_1) <br>
&nbsp; [1.2 Функциональные требования к Системе](#title1_2) <br>
[2. Структура БД](#title2)</br>
[3. Описание БД](#title3)</br>
[4. Пояснительная записка](#title4)</br>


## <a id="title1"> 1. Требования к Системе </a>
### <a id="title1_1"> 1.1. Термины и определения </a>
|Термин	|Определение|
|---|---|
|**Доставка**	|Комплекс мероприятий, осуществляемых для передачи **Карты** **Клиенту**|
|**Карта**	|Банковская карта (расчетная, кредитная) на физическом носителе выпущенная на имя конкретного **Клиента**, либо неперсонифицированная.|
|**Клиент**	|физическое лицо на имя которого в **Банке** открыт счёт и выпущена **Карта**|
|**Курьер**	|Физическое лицо осуществляющее доставку **Карты**|
|**Система**	|Комплекс программного и технического обеспечения предназначенный для поддержки бизнес-процессов **Банка**|
|**Пользователь**	|Физическое лицо имеющее доступ к **Системе** и обладающий правами на отображение и/или изменение данных|

### <a id="title1_2"> 1.2 Функциональные требования к Системе </a>

- **Курьер** должен иметь возможность авторизации в **Системе** как пользователь.
- **Курьер** должен иметь возможность просмотра в **Системе**:
    - Списка заданий на **Доставку** содержащих в т.ч. реквизиты **Карты**, **Клиента** и атрибуты **Встречи**).
- **Курьер** должен иметь возможность изменять следующие атрибуты:
    - атрибуты **Встречи** (Время, Место, Контактные данные **Клиента**)
    - статус **Доставки** (Завершена, Отменена или Неуспешна)

## <a id="title2"> 2. Структура БД **ParcelDelivery** </a>
>Спроектировать нормализованную структуру БД (до 3-й НФ).
>Нарисовать схему таблиц базы данных с использованием любого графического инструмента, например drawio.

[ParcelDelivery.drawio.xml](https://github.com/vnukov-vv/AlfaCampus-SA/blob/main/HW%20DB/ParcelDelivery.drawio.xml)
<br>
![](https://github.com/vnukov-vv/AlfaCampus-SA/blob/main/HW%20DB/ParcelDelivery.drawio.png)

## <a id="title3"> 3. Описание БД **ParcelDelivery** </a>
>Подготовить описание БД на примере документа Описание БД PlasticOrder.docx.
>При описании полей таблиц допустимо не заполнять «Размер», а в «Тип данных» ограничится следующим: строка, число, булевое значение;
>допустимо не заполнять таблицы «Ключи» и «Индексы».

База данных предназначена для автоматизации процессов доставки Карт

### Таблицы БД **ParcelDelivery**
|№ |Имя|Описание| 
|---|---|---|
|1|dlv.users|Пользователи **Системы**|
|2|dlv.parcels|Заказы на **Доставку**|
|3|dlv.statuses|Статусы **Доставки**|
|4|dlv.clients|Анкеты **Клиентов**|
|3|dlv.adresses|Адрес **Встречи**|

### Описание таблиц БД **CardDelivery**
#### Таблица1
##### Колонки
|№ |Имя|Тип<br>данных|Размер|Обязательное<br>(Да/Нет)|Описание|
|---|---|---|---|---|---|
|---|---|---|---|---|---|
##### Ключи
|Тип|Имя ключа|Поле|Описание| 
|---|---|---|---|
|---|---|---|---|
##### Индексы
|Имя|Детали|Ключи|Описание| 
|---|---|---|---|
|---|---|---|---|

## <a id="title4"> 4. Пояснительная записка </a>
>почему структура БД именно такая
>какие изменения нужно будет ввести в структуру БД,
>если придется расширять функциональность системы до возможности «Доставки любых банковских продуктов».

При проектировании я исходил из того, что сервис будет интегрироваться с уже существующими,
когда часть необходимых данных для отображения в Сервисе берется из других БД или же ссылается на них (**PlasticOrder**).

В любом случае **Доставка** привязывается к заказу **Карты** при этом для курьерской доставки выделяется отдельный **idDepartment** (ID отделения выдачи карты).

В самом упрощенном варианте **Система** может работать непосредственно с БД **PlasticOrder** для этого в БД необходимо добавить две таблицы **Shippings** (Адрес курьерской доставки) и **Сontacts** (Контактные данные) т.к. в "анкете" и "заказе" БД **PlasticOrder** эти атрибуты отсутствуют. **Сontacts** выносим в отдельную таблицу т.к. они могут не совпадать с указанными в Анкете **Клиента** (временный телефон **Клиента** или телефон места его временного пребывания).

Чтобы иметь возможность группировать разные заказы (например две разных карты) в одну доставку, добавлена отдельная сущность **Parcel** ("Посылка").

**Users** и **Employees** разнесены в целях упрощенного администрирования. Для ограничения доступа достаточно просто удалить стоку в **Users**. При этом информация о **Курьере** останется в **Employees**, равно как не будут затронуты остальные данные БД.

Для отображения состава заказа в целях его однозначной идентификации (в нашем случае это должен быть уникальный атрибут **Name** - PAN **Карты**) добавлена таблица **Subjects**.

Расширение функциональности **Cистемы** до возможности *«Доставки любых банковских продуктов»* возожно добавлением в схему таблицы **Products**, а в таблицу **Subjects** атрибута **Product_ID**. Новые продукта могут добавляться в этот справочник или импортироваться из сущетвующего. 






